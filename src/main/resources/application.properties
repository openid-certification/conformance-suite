# Current framework version
fintechlabs.version=5.1.39

# If set, the suite will update mongodb's featureCompatibilityVersion on startup
# As per mongodb documentation, this should be changed sometime after upgrading to a newer mongodb
# Leave unset or blank to manage updating featureCompatibilityVersion manually
openid.mongodb.targetFeatureCompatibilityVersion=6.0

spring.data.mongodb.uri=mongodb://mongodb:27017/test_suite
# Avoid exporthtml timing out
spring.mvc.async.request-timeout=2m
fintechlabs.base_url=https://localhost:8443
fintechlabs.base_mtls_url=https://localhost:8444

# If true, this redirects port 8443 on localhost to the same port on the ingress (httpd).
# This is so that selenium running on this machine can make submissions via the ingress
# when a developer is running the conformance suite locally, as otherwise accesses to
# https://localhost:8443/ will fail.
# (when deployed in the cloud, selenium will be sent to the external hostname & IP for the
# conformance suite which will work fine - it's only when the hostname resolves 127.0.0.1
# that the problem happens.)
fintechlabs.startredir=false

# The client name is what will be registered when doing OIDC dynamic registration
oidc.clientname=OIDF Conformance Suite
# Make sure static clients match the redirect uri below
oidc.redirecturi=${fintechlabs.base_url}/openid_connect_login


server.forward-headers-strategy=NATIVE
server.max-http-request-header-size=32KB

# Keypair for signing and export. Note that the trailing backslashes allow for a multiline value.
fintechlabs.jwks={\
  "keys": [\
    {\
      "kty": "RSA",\
      "d": "D5kUo5FPWV0U8cU6ZnxJ7Ljt_vRbBia8-MnTO_s3jpuL7t3ANavUHkuiLJOR1JAuxY-ueRqKiqHGq6TKVQKHPfPV-2lX5qECZ-HTETVZsMiLrZ6ims5myQxwJSiWqLtbJcytRG3XIM8MsuHS8a6L4YplSemuKVhtulD8WkG7PxIJDDb9mQh1W_5mT_DeMUKffL8Zdbf_pvFV8vK3drjoXFTVa9w18CsfodPOu49WlKXhpCIvuBNnr21faG1xIpWOolHio35rHHnMdhhZzda6l5CG2Cv5RunrQe7XJyzkNWhXxjRaZXdpAOuSz_alJPK-4stS6z7sUSYg9PvnPuo4IQ",\
      "e": "AQAB",\
      "use": "sig",\
      "kid": "demo-test-key-20180514",\
      "alg": "RS256",\
      "n": "j_Uxcxwd8mNeTgVp8b-gkp1_b-E2IZdY_lWWJYJz7z1qL5OGRSXPaEmPvnMXHRgFr9adSK4K7gWZThqIaSgP4UBG6_ecf12plMq246SIyIaPWIRjaMPjSIsOg50RmsTDcIJ4z8RtZyYpGJHbbRvaE8Qc2iUirqdRCLbN00ypwh25fA5JplNnBO4SloTuiHVyyUCFoBamlT6iXskTGx7Fzfr40LUf_-M-uPAqXjiB91tfT9x076qv91TPIHvfBdJKDitxx5qM8Fg3iz_P-XWEEQESrC3DQLWd7YgNJ_UFePoJmwnlscypR1QJUtpeqJsQtuFSXJRiwrdVGgpUBgOJpQ"\
    }\
  ]\
}

# Key ID from the above key set to use for signing exports.
fintechlabs.signingKey=demo-test-key-20180514

logging.level.com.gargoylesoftware.htmlunit=ERROR
# Disable verbose CSS Errors log messages
logging.level.org.htmlunit.DefaultCssErrorHandler=ERROR
# Disable verbose CSS Errors log messages
logging.level.org.htmlunit.css.CssStyleSheet=ERROR

# Enable these to help track down problems occuring in the selenium browser automation
# See also https://htmlunit.sourceforge.io/logging.html
# logging.level.com.gargoylesoftware.htmlunit=TRACE
# logging.level.org.htmlunit=TRACE
# logging.level.org.apache.http=TRACE
# logging.level.org.seleniumhq=TRACE
# logging.level.net.openid.conformance.frontChannel=DEBUG
# logging.level.httpclient.wire=DEBUG

# logging.level.org.springframework.web=DEBUG

# Allow to show external Ip address
fintechlabs.show_external_ip_address=false

springdoc.packagesToScan=net.openid.conformance
springdoc.swagger-ui.path=/api-document.html

spring.security.oauth2.client.provider.idp.issuerUri=${oidc.idp.iss}
spring.security.oauth2.client.provider.idp.user-name-attribute=email
spring.security.oauth2.client.registration.idp.client-name=Conformance Suite
spring.security.oauth2.client.registration.idp.admin-role=conformance-admin
spring.security.oauth2.client.registration.idp.client-id=${oidc.idp.clientid}
spring.security.oauth2.client.registration.idp.client-secret=${oidc.idp.secret}
spring.security.oauth2.client.registration.idp.client-authentication-method=client_secret_post
spring.security.oauth2.client.registration.idp.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.idp.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}
spring.security.oauth2.client.registration.idp.scope=openid,email

spring.security.oauth2.resourceserver.jwt.issuer-uri=${oidc.idp.iss}

springdoc.show-actuator=false

# comma separated list of tests which are allowed to fail when generating the certification package
net.openid.conformance.logging.logapi.certification-package-failed-tests-exception-list=oidcc-server-rotate-keys

# Allow to control env logging to console / logfile to reduce log file sizes.
net.openid.conformance.testModules.logFinalEnv=false
